<app-home></app-home>

<div class="col-md-12">
  <div class="card card-container">
    <form *ngIf="!isSignUpSuccess" name="form" (ngSubmit)="f.form.valid && onSubmit()" #f="ngForm" novalidate>
      <div class="form-group">
        <label for="nom">Nom</label>
        <input type="text" class="form-control" name="nom" [(ngModel)]="form.nom" required minlength="3" maxlength="20" #nom="ngModel" />
        <div class="alert alert-danger" *ngIf="nom.errors && f.submitted">
          <div *ngIf="nom.errors['required']">Le nom est requis</div>
          <div *ngIf="nom.errors['minlength']">Le nom doit comporter au moins 3 caractères</div>
          <div *ngIf="nom.errors['maxlength']">Le nom ne peut pas dépasser 20 caractères</div>
        </div>
      </div>

      <div class="form-group">
        <label for="prenom">Prénom</label>
        <input type="text" class="form-control" name="prenom" [(ngModel)]="form.prenom" required minlength="3" maxlength="20" #prenom="ngModel" />
        <div class="alert alert-danger" *ngIf="prenom.errors && f.submitted">
          <div *ngIf="prenom.errors['required']">Le prénom est requis</div>
          <div *ngIf="prenom.errors['minlength']">Le prénom doit comporter au moins 3 caractères</div>
          <div *ngIf="prenom.errors['maxlength']">Le prénom ne peut pas dépasser 20 caractères</div>
        </div>
      </div>

      <div class="form-group">
        <label for="adresse">Adresse</label>
        <input type="text" class="form-control" name="adresse" [(ngModel)]="form.adresse" required minlength="3" maxlength="50" #adresse="ngModel" />
        <div class="alert alert-danger" *ngIf="adresse.errors && f.submitted">
          <div *ngIf="adresse.errors['required']">L'adresse est requise</div>
          <div *ngIf="adresse.errors['minlength']">L'adresse doit comporter au moins 3 caractères</div>
          <div *ngIf="adresse.errors['maxlength']">L'adresse ne peut pas dépasser 50 caractères</div>
        </div>
      </div>

      <div class="form-group">
        <label for="age">Âge</label>
        <input type="number" class="form-control" name="age" [(ngModel)]="form.age" required min="0" max="120" #age="ngModel" />
        <div class="alert alert-danger" *ngIf="age.errors && f.submitted">
          <div *ngIf="age.errors['required']">L'âge est requis</div>
          <div *ngIf="age.errors['min']">L'âge doit être d'au moins 0</div>
          <div *ngIf="age.errors['max']">L'âge ne peut pas dépasser 120</div>
        </div>
      </div>

      <div class="form-group">
        <label for="role">Rôle</label>
        <select class="form-control" name="role" [(ngModel)]="form.role" required>
          <option *ngFor="let role of roles" [value]="role">{{ role }}</option>
        </select>
      </div>

      <div class="form-group">
        <label for="email">Email</label>
        <input type="email" class="form-control" name="email" [(ngModel)]="form.email" required email #email="ngModel" />
        <div class="alert alert-danger" *ngIf="email.errors && f.submitted">
          <div *ngIf="email.errors['required']">L'email est requis</div>
          <div *ngIf="email.errors['email']">L'email doit être une adresse email valide</div>
        </div>
      </div>

      <div class="form-group">
        <label for="password">Mot de passe</label>
        <input type="password" class="form-control" name="password" [(ngModel)]="form.password" required minlength="8" #password="ngModel" />
        <div class="alert alert-danger" *ngIf="password.errors && f.submitted">
          <div *ngIf="password.errors['required']">Le mot de passe est requis</div>
          <div *ngIf="password.errors['minlength']">Le mot de passe doit avoir au moins 8 caractères</div>
        </div>
      </div>

      <div class="form-group">
        <label for="confirmPassword">Confirmer le mot de passe</label>
        <input type="password" class="form-control" name="confirmPassword" [(ngModel)]="form.confirmPassword" required minlength="8" #confirmPassword="ngModel" />
        <div class="alert alert-danger" *ngIf="confirmPassword.errors && f.submitted">
          <div *ngIf="confirmPassword.errors['required']">Confirmer le mot de passe est requis</div>
          <div *ngIf="confirmPassword.errors['minlength']">Confirmer le mot de passe doit avoir au moins 8 caractères</div>
        </div>
      </div>

      <div class="form-group">
        <button class="btn btn-primary btn-block">S'inscrire</button>
      </div>
      <div class="alert alert-warning" *ngIf="f.submitted && isSignUpFailed">
        <span *ngIf="errorMessage === 'Email déjà utilisé'">Email déjà utilisé.</span>
        <span *ngIf="errorMessage !== 'Email déjà utilisé'">{{ errorMessage }}</span>
      </div>
    </form>

    <div class="alert alert-success" *ngIf="isSignUpSuccess">
      Votre inscription est réussie! Redirection vers la page de connexion...
    </div>
  </div>
</div>
